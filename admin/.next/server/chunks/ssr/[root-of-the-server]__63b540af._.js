module.exports=[29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},79594,a=>{"use strict";var b=a.i(29173);let c=globalThis.prismaGlobal??new b.PrismaClient;a.s(["prisma",()=>c])},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},55693,a=>{"use strict";var b=a.i(37936),c=a.i(79594),d=a.i(18558),e=a.i(53112),f=a.i(13095);let g=e.z.object({name:e.z.string().min(1,"Name is required"),email:e.z.string().email("Invalid email"),status:e.z.enum(["Active","Pending","Inactive"]),investmentValue:e.z.string().optional()});async function h(){try{return await c.prisma.investor.findMany({orderBy:{createdAt:"desc"}})}catch(a){throw console.error("Failed to fetch investors:",a),Error("Failed to fetch investors")}}async function i(a){let b={name:a.get("name"),email:a.get("email"),status:a.get("status"),investmentValue:a.get("investmentValue")},e=g.safeParse(b);if(!e.success)return{errors:e.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Investor."};let{name:f,email:h,status:i,investmentValue:j}=e.data;try{await c.prisma.investor.create({data:{name:f,email:h,status:i,investmentValue:j}})}catch(a){return{message:"Database Error: Failed to Create Investor."}}return(0,d.revalidatePath)("/admin/investors"),{message:"Success"}}async function j(a,b){let e={name:b.get("name"),email:b.get("email"),status:b.get("status"),investmentValue:b.get("investmentValue")},f=g.safeParse(e);if(!f.success)return{errors:f.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Investor."};let{name:h,email:i,status:j,investmentValue:k}=f.data;try{await c.prisma.investor.update({where:{id:a},data:{name:h,email:i,status:j,investmentValue:k}})}catch(a){return{message:"Database Error: Failed to Update Investor."}}return(0,d.revalidatePath)("/admin/investors"),{message:"Updated Investor"}}async function k(a){try{return await c.prisma.investor.delete({where:{id:a}}),(0,d.revalidatePath)("/admin/investors"),{message:"Deleted Investor"}}catch(a){return{message:"Database Error: Failed to Delete Investor."}}}(0,f.ensureServerEntryExports)([h,i,j,k]),(0,b.registerServerReference)(h,"00a7bd80d812890828df0462232dbf6f8587cda2ad",null),(0,b.registerServerReference)(i,"40239bdd2c6ef9153f7dd9bd3c133f67f6fe134f31",null),(0,b.registerServerReference)(j,"60a4792d253fea54b456790990005915bb69ab3a34",null),(0,b.registerServerReference)(k,"40453dd989df912a4ee4d0009aed4df337755efd6b",null);var l=a.i(29173),m=a.i(72849);let n=new l.PrismaClient;async function o(a){let b=a.get("name"),c=a.get("email"),d=a.get("investmentValue");try{return await n.investor.create({data:{name:b,email:c,investmentValue:d,status:"Pending"}}),{success:!0}}catch(a){return console.error("Registration failed:",a),{success:!1,error:"Registration failed. Email might already be in use."}}}async function p(a){try{let b=await n.investor.findUnique({where:{id:a}});if(!b)throw Error("Investor not found");let c=function(a=12){let b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*",c="";for(let d=0,e=b.length;d<a;++d)c+=b.charAt(Math.floor(Math.random()*e));return c}(),e=await m.default.hash(c,10),f=await n.user.create({data:{name:b.name,email:b.email,password:e,role:"INVESTOR"}});return await n.investor.update({where:{id:a},data:{status:"Active",userId:f.id}}),console.log("---------------------------------------------------"),console.log(`ðŸ“§ EMAIL SENT TO: ${b.email}`),console.log("Subject: Welcome to Aurevon Wealth Group"),console.log("Message: Your account has been approved."),console.log(`Username: ${b.email}`),console.log(`Password: ${c}`),console.log("---------------------------------------------------"),(0,d.revalidatePath)("/admin/investors"),{success:!0,password:c}}catch(a){return console.error("Approval failed:",a),{success:!1,error:"Failed to approve investor."}}}async function q(a){try{return await n.investor.update({where:{id:a},data:{status:"Rejected"}}),(0,d.revalidatePath)("/admin/investors"),{success:!0}}catch(a){return{success:!1,error:"Failed to reject investor."}}}(0,f.ensureServerEntryExports)([o,p,q]),(0,b.registerServerReference)(o,"40f8c9fa2b1d11ee2297005c4d08c982229f7069fc",null),(0,b.registerServerReference)(p,"40c6d98d75cc91259037dbe2d9553c3c881a99ef8b",null),(0,b.registerServerReference)(q,"409f60dfd3eebe774f666eb92aa924c46452dbfed5",null),a.s([],90411),a.i(90411),a.s(["00a7bd80d812890828df0462232dbf6f8587cda2ad",()=>h,"40239bdd2c6ef9153f7dd9bd3c133f67f6fe134f31",()=>i,"40453dd989df912a4ee4d0009aed4df337755efd6b",()=>k,"409f60dfd3eebe774f666eb92aa924c46452dbfed5",()=>q,"40c6d98d75cc91259037dbe2d9553c3c881a99ef8b",()=>p],55693)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__63b540af._.js.map