module.exports=[68362,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(52650),e=a.i(80710),f=a.i(33243),g=a.i(70106);let h=(0,g.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var i=a.i(15618),j=a.i(81560);let k=(0,g.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var l=a.i(96221);let m=(0,g.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var n=a.i(5050),o=(0,n.createServerReference)("00988297b239235a716955f76d2ce982876b86c261",n.callServer,void 0,n.findSourceMapURL,"getPosts"),p=(0,n.createServerReference)("401a7243c912fe99dbd75010eea599d18f960ec70c",n.callServer,void 0,n.findSourceMapURL,"createPost"),q=(0,n.createServerReference)("403082c108704fd8c6c428b838889a0d953332914e",n.callServer,void 0,n.findSourceMapURL,"deletePost"),r=(0,n.createServerReference)("6081c389dbe20a090b638dbff4895ab5c58a5a9d89",n.callServer,void 0,n.findSourceMapURL,"updatePost"),s=a.i(73505),t=a.i(46271),u=a.i(86723),v=a.i(74290),w=a.i(1703),x=a.i(14800),y=a.i(91128),z=c,A=a.i(65802);function B(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class C extends z.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,y.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function D({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,z.useId)(),h=(0,z.useRef)(null),i=(0,z.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=(0,z.useContext)(A.MotionConfigContext),k=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=B(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():B(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,z.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:k,right:l}=i.current;if(d||!h.current||!a||!b)return;let m="left"===e?`left: ${k}`:`right: ${l}`;h.current.dataset.motionPopId=g;let n=document.createElement("style");j&&(n.nonce=j);let o=f??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${m}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[d]),(0,b.jsx)(C,{isPresent:d,childRef:h,sizeRef:i,children:z.cloneElement(a,{ref:k})})}let E=({children:a,initial:d,isPresent:e,onExitComplete:f,custom:g,presenceAffectsLayout:h,mode:i,anchorX:j,root:k})=>{let l=(0,v.useConstant)(F),m=(0,c.useId)(),n=!0,o=(0,c.useMemo)(()=>(n=!1,{id:m,initial:d,isPresent:e,custom:g,onExitComplete:a=>{for(let b of(l.set(a,!0),l.values()))if(!b)return;f&&f()},register:a=>(l.set(a,!1),()=>l.delete(a))}),[e,l,f]);return h&&n&&(o={...o}),(0,c.useMemo)(()=>{l.forEach((a,b)=>l.set(b,!1))},[e]),c.useEffect(()=>{e||l.size||!f||f()},[e]),"popLayout"===i&&(a=(0,b.jsx)(D,{isPresent:e,anchorX:j,root:k,children:a})),(0,b.jsx)(x.PresenceContext.Provider,{value:o,children:a})};function F(){return new Map}var G=a.i(20410);let H=a=>a.key||"";function I(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let J=({children:a,custom:d,initial:e=!0,onExitComplete:f,presenceAffectsLayout:g=!0,mode:h="sync",propagate:i=!1,anchorX:j="left",root:k})=>{let[l,m]=(0,G.usePresence)(i),n=(0,c.useMemo)(()=>I(a),[a]),o=i&&!l?[]:n.map(H),p=(0,c.useRef)(!0),q=(0,c.useRef)(n),r=(0,v.useConstant)(()=>new Map),[s,t]=(0,c.useState)(n),[x,y]=(0,c.useState)(n);(0,w.useIsomorphicLayoutEffect)(()=>{p.current=!1,q.current=n;for(let a=0;a<x.length;a++){let b=H(x[a]);o.includes(b)?r.delete(b):!0!==r.get(b)&&r.set(b,!1)}},[x,o.length,o.join("-")]);let z=[];if(n!==s){let a=[...n];for(let b=0;b<x.length;b++){let c=x[b],d=H(c);o.includes(d)||(a.splice(b,0,c),z.push(c))}return"wait"===h&&z.length&&(a=z),y(I(a)),t(n),null}let{forceRender:A}=(0,c.useContext)(u.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:x.map(a=>{let c=H(a),s=(!i||!!l)&&(n===x||o.includes(c));return(0,b.jsx)(E,{isPresent:s,initial:(!p.current||!!e)&&void 0,custom:d,presenceAffectsLayout:g,mode:h,root:k,onExitComplete:s?void 0:()=>{if(!r.has(c))return;r.set(c,!0);let a=!0;r.forEach(b=>{b||(a=!1)}),a&&(A?.(),y(q.current),i&&m?.(),f&&f())},anchorX:j,children:a},c)})})};function K(){let[a,g]=(0,c.useState)([]),[n,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("DRAFT"),F=async()=>{u(!0);try{let a=await o();g(a)}catch(a){console.error(a)}finally{u(!1)}};(0,c.useEffect)(()=>{F()},[]);let G=async a=>{a.preventDefault();let b=new FormData;b.append("title",z),b.append("content",B),b.append("status",D),x?await r(x.id,b):await p(b),H(),F()},H=()=>{w(!1),y(null),A(""),C(""),E("DRAFT")},I=async a=>{confirm("Delete this post?")&&(await q(a),F())};return(0,b.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold font-display text-primary",children:"Content Management"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Curate insights and news for your investors."})]}),(0,b.jsxs)(d.Button,{onClick:()=>w(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[(0,b.jsx)(i.Plus,{className:"w-4 h-4 mr-2"})," New Post"]})]}),(0,b.jsx)("div",{className:"flex gap-4",children:(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search posts...",className:"pl-10 bg-white"})]})}),n?(0,b.jsx)("div",{className:"flex justify-center p-12",children:(0,b.jsx)(l.Loader2,{className:"w-8 h-8 animate-spin text-accent"})}):(0,b.jsx)("div",{className:"grid gap-6",children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(h,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),"No posts found. Start writing today."]}):a.map(a=>(0,b.jsx)(e.Card,{className:"group hover:shadow-md transition-all border-l-4 border-l-transparent hover:border-l-accent",children:(0,b.jsxs)(e.CardContent,{className:"p-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-primary",children:a.title}),(0,b.jsx)("span",{className:(0,s.cn)("px-2.5 py-0.5 rounded-full text-[10px] uppercase tracking-wider font-bold","PUBLISHED"===a.status?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:a.status})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["By ",(0,b.jsx)("span",{className:"text-primary font-medium",children:a.author?.name||"Admin"})," â€¢ ",new Date(a.createdAt).toLocaleDateString()]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{y(a),A(a.title),C(""),E(a.status),w(!0)},children:(0,b.jsx)(k,{className:"w-4 h-4 text-gray-500"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:text-red-600",onClick:()=>I(a.id),children:(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})})]})]})},a.id))}),(0,b.jsx)(J,{children:v&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:H}),(0,b.jsxs)(t.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-background w-full max-w-lg rounded-xl shadow-2xl relative z-10 overflow-hidden",children:[(0,b.jsx)("div",{className:"p-6 border-b bg-secondary/30",children:(0,b.jsx)("h2",{className:"text-xl font-bold font-display",children:x?"Edit Post":"Create New Post"})}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Title"}),(0,b.jsx)(f.Input,{value:z,onChange:a=>A(a.target.value),required:!0,placeholder:"Market Update - Q3 2025"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Content / Summary"}),(0,b.jsx)("textarea",{value:B,onChange:a=>C(a.target.value),className:"flex min-h-[100px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,b.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[(0,b.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,b.jsx)("option",{value:"PUBLISHED",children:"Published"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:H,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",className:"bg-primary text-primary-foreground",children:x?"Update Post":"Create Draft"})]})]})})]})]})})]})}a.s(["default",()=>K],68362)}];

//# sourceMappingURL=admin_src_app_posts_page_tsx_8ec2598c._.js.map